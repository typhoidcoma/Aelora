# =============================================================================
# Aelora - settings.yaml
# Copy this file to settings.yaml and fill in your values.
# =============================================================================

# --- Discord ---
discord:
  token: "YOUR_DISCORD_BOT_TOKEN"
  # How the bot responds in guild (server) channels:
  #   "mention" = only replies when @mentioned (recommended)
  #   "all"     = replies to every message in allowed channels
  guildMode: "mention"
  # Restrict to specific channel IDs. Empty list = all channels.
  allowedChannels: []
  # Whether to respond to DMs
  allowDMs: true
  # Status message shown under the bot's name
  status: "Watching the void"
  # Guild ID for instant slash command registration (dev mode).
  # Leave blank for global registration (takes up to 1 hour to propagate).
  # guildId: "YOUR_GUILD_ID"
  # Custom embed accent color (hex). Defaults to Discord blurple (#5865F2).
  # embedColor: "#5865F2"

# --- LLM ---
# Any OpenAI-compatible endpoint works:
#   OpenAI:      https://api.openai.com/v1
#   Ollama:      http://localhost:11434/v1
#   OpenRouter:  https://openrouter.ai/api/v1
#   Together:    https://api.together.xyz/v1
#   Groq:        https://api.groq.com/openai/v1
#   LM Studio:   http://localhost:1234/v1
llm:
  baseURL: "https://api.openai.com/v1"
  apiKey: "sk-YOUR_API_KEY"
  model: "gpt-4o-mini"
  systemPrompt: "You are a helpful Discord bot. Be concise."
  maxTokens: 1024
  # How many previous messages to keep in conversation history per channel
  maxHistory: 20

# --- Persona ---
# The persona system composes the bot's system prompt from markdown files in a directory.
# Each file has YAML frontmatter (order, enabled, label, section) and markdown content.
# If disabled, falls back to llm.systemPrompt above.
persona:
  enabled: true
  dir: "persona"          # Path to persona directory (relative to project root)
  botName: "Aelora"       # Used for {{botName}} substitution in persona files
  activePersona: "aelora"    # Which persona folder to load (e.g. aelora, wendy, batperson)

# --- Tool Configuration ---
# API keys and secrets for tools that need them.
# Each tool declares which keys it needs via its `config` field.
# See src/tools/_example-gmail.ts for a complete example.
tools:
  # Brave Web Search (https://brave.com/search/api/)
  # brave:
  #   apiKey: "YOUR_BRAVE_API_KEY"

  # CalDAV calendar (Radicale, Nextcloud, Baikal, iCloud, etc.)
  # caldav:
  #   serverUrl: "http://localhost:5232"
  #   username: "user"
  #   password: "app-password"
  #   authMethod: "Basic"        # "Basic", "Oauth", or "Bearer"
  #   calendarName: ""           # Specific calendar name (empty = use first/default)

# --- Agents ---
# Sub-agents that can perform multi-step tasks using LLM reasoning + tools.
# Agents are auto-discovered from src/agents/ â€” drop a .ts file, it loads on startup.
agents:
  enabled: true
  maxIterations: 5    # Default max LLM iterations per agent (individual agents can override)

# --- Heartbeat ---
# Periodic pulse that runs registered handlers (separate from cron).
# Handlers can check conditions and take proactive actions.
heartbeat:
  enabled: true
  intervalMs: 60000   # How often to tick, in milliseconds (default: 60s)

# --- Web Dashboard ---
web:
  enabled: true
  port: 3000

# --- Discord Activity ---
# Host a web app (e.g. Unity WebGL build) as an embedded Discord Activity.
# Requires Activities enabled in the Discord Developer Portal.
# Place your build files in the activity/ directory at project root.
# clientId = your Application ID. clientSecret = OAuth2 Client Secret.
activity:
  enabled: false
  clientId: "YOUR_APPLICATION_ID"
  clientSecret: "YOUR_CLIENT_SECRET"
  # Direct URL to your server (bypasses Discord proxy for large Unity files)
  # serverUrl: "https://your-tunnel.example.com"
